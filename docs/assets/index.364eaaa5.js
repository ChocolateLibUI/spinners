var K=Object.defineProperty;var W=(i,e,t)=>e in i?K(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var l=(i,e,t)=>(W(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();class Y{constructor(e,t,s){l(this,"type");l(this,"target");l(this,"data");this.type=e,this.target=t,this.data=s}}class U{constructor(){l(this,"target");l(this,"eventHandler_ListenerStorage",{})}on(e,t){let s=this.eventHandler_ListenerStorage[e];return s?s.indexOf(t)==-1?s.push(t):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[e]=[t],t}once(e,t){return this.on(e,function(s){return t(s),!0}),t}off(e,t){let s=this.eventHandler_ListenerStorage[e];if(s){let n=s.indexOf(t);n!=-1?s.splice(n,1):console.warn("Listener not in handler")}return t}emit(e,t){let s=this.eventHandler_ListenerStorage[e];if(s&&s.length>0){let n=Object.freeze(new Y(e,this.target||this,t));s.length>1&&(s=[...s]);for(let a=0,r=s.length;a<r;a++)try{s[a](n)&&(s.splice(a,1),r--,a--)}catch(_){console.warn("Failed while dispatching event",_)}}}clear(e){this.eventHandler_ListenerStorage[e]=[]}inUse(e){var t;return Boolean((t=this.eventHandler_ListenerStorage[e])==null?void 0:t.length)}has(e,t){var s;return Boolean(((s=this.eventHandler_ListenerStorage[e])==null?void 0:s.indexOf(t))!==-1)}amount(e){var t;return((t=this.eventHandler_ListenerStorage[e])==null?void 0:t.length)||0}get eventsUserOnly(){return this}}var q=Object.defineProperty,Z=(i,e,t)=>e in i?q(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,D=(i,e,t)=>(Z(i,typeof e!="symbol"?e+"":e,t),t);class Q{constructor(e){D(this,"_documents"),D(this,"main"),D(this,"_events"),D(this,"events"),this.main=e,this._documents=[e],this._events=new U,this._events.target=this,this.events=this._events.eventsUserOnly}forDocuments(e){for(let t=0;t<this._documents.length;t++)e(this._documents[t])}get documents(){return[...this._documents]}registerDocument(e,t){if(this._documents.includes(e))return console.warn("Document registered twice");if(this._documents.push(e),t){let s=this.main.head.children;for(let n=0;n<s.length;n++)switch(s[n].nodeName){case"LINK":if(s[n].rel!=="stylesheet")break;case"STYLE":e.head.appendChild(s[n].cloneNode(!0));break}}this._events.emit("added",e)}deregisterDocument(e){let t=this._documents.indexOf(e);if(t==-1)return console.warn("Document not registered");if(this._documents[t]===this.main)return console.warn("Main document cannot be removed");this._documents.splice(t,1),this._events.emit("removed",e)}}let T=(i,e)=>{var s;let t=new TextEncoder().encode(i);return i=new TextDecoder().decode(t.slice(0,e)),((s=i.at(-1))==null?void 0:s.charCodeAt(0))===65533?i.slice(0,-1):i};var X=Object.defineProperty,ee=(i,e,t)=>e in i?X(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,u=(i,e,t)=>(ee(i,typeof e!="symbol"?e+"":e,t),t);class k{constructor(e){u(this,"___listeners",[]),u(this,"___value"),u(this,"info"),this.___value=e}addListener(e,t){if(this.___listeners.push(e),t){let s=this.get;s instanceof Promise?s.then(e):e(s)}return e}removeListener(e){let t=this.___listeners.indexOf(e);return t!=-1&&this.___listeners.splice(t,1),e}get get(){return this.___value}set set(e){this.___value!==e&&(this.___value=e,this.___update())}___update(){if(this.___listeners)for(let e=0,t=this.___listeners.length;e<t;e++)try{this.___listeners[e](this.___value)}catch(s){console.warn("Failed while calling value listeners ",s)}}compare(e){let t=this.get;return t instanceof Promise?t.then(s=>e!==s):e!==t}get inUse(){return this.___listeners.length!==0}hasListener(e){return this.___listeners.indexOf(e)!==-1}toJSON(){return this.___value}}class H extends k{constructor(e,t){super(e),u(this,"___limiters"),u(this,"___limitersListeners",[]),this.___limiters=t}addLimiterListener(e,t){return this.___limitersListeners.push(e),t&&e(this),e}removeLimiterListener(e){let t=this.___limitersListeners.indexOf(e);return t!=-1&&this.___limitersListeners.splice(t,1),e}___updateLimiter(){if(this.___limitersListeners)for(let e=0,t=this.___limitersListeners.length;e<t;e++)try{this.___limitersListeners[e](this)}catch(s){console.warn("Failed while calling value listeners ",s)}}get limiters(){return this.___limiters}set limiters(e){e?this.___limiters=e:delete this.___limiters,this.___updateLimiter()}checkLimit(e){if(this.___limiters){for(let t=0;t<this.___limiters.length;t++)if(this.___limiters[t].func(e))return!1}return!0}checkLimitReason(e){if(this.___limiters)for(let t=0;t<this.___limiters.length;t++){let s=this.___limiters[t];if(s.func(e))if(s.correction)switch(typeof s.reason){case"string":return{allowed:!1,reason:s.reason,correction:s.correction(e)};case"function":return{allowed:!1,reason:s.reason(e),correction:s.correction(e)}}else switch(typeof s.reason){case"string":return{allowed:!1,reason:s.reason};case"function":return{allowed:!1,reason:s.reason(e)}}}return{allowed:!0,reason:""}}set set(e){e===this.___value||!this.checkLimit(e)||(this.___value=e,this.___update())}}class x extends H{constructor(e,t=-1/0,s=1/0,n,a){if(super(e,a),u(this,"_min"),u(this,"_max"),u(this,"_step"),u(this,"_halfStep",0),u(this,"decimals",0),this._min=t,this._max=s,n){this._step=n,this._halfStep=n/2;let r=n.toString().split(".")[1];this.decimals=n<1e14&&r?r.length:0}}get min(){return this._min}set min(e){this._min=e;let t=Math.max(this._min,this.___value);this.___value!==t&&(this.___value=t,this.___update()),this.___updateLimiter()}get max(){return this._max}set max(e){this._max=e;let t=Math.min(this._max,this.___value);this.___value!==t&&(this.___value=t,this.___update()),this.___updateLimiter()}get step(){return this._step}set step(e){if(e){this._step=e,this._halfStep=e/2;let t=e.toString().split(".")[1];this.decimals=e<1e14&&t?t.length:0}else delete this._step,this._halfStep=0,this.decimals=0;this.___updateLimiter()}set set(e){if(this._step){let t=e%this._step;e=Number((t>this._halfStep?e+(this._step-t):e-t).toFixed(this.decimals))}e=Math.min(this._max,Math.max(this._min,e)),e!==this.___value&&this.checkLimit(e)&&(this.___value=e,this.___update())}set setUnchecked(e){super.set=e}}class $ extends H{constructor(e,t,s,n,a){super(e,a),u(this,"_maxLength"),u(this,"_maxByteLength"),u(this,"___enums"),this._maxLength=s,this._maxByteLength=n,this.___enums=t}get enums(){return this.___enums}set enums(e){if(e){if(this.___enums=e,!this.checkEnum(this.___value))for(const t in this.___enums){this.___value=t,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(e){return!this.___enums||e in this.___enums}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(e){if(this._maxByteLength=e,this._maxByteLength){let t=T(this.___value,this._maxByteLength);this.___value!==t&&(this.___value=t,this.___update())}this.___updateLimiter()}set set(e){this._maxLength&&e.length>this._maxLength&&(e=e.slice(0,this._maxLength)),this._maxByteLength&&(e=T(e,this._maxByteLength)),e!==this.___value&&this.checkLimit(e)&&this.checkEnum(e)&&(this.___value=e,this.___update())}set setUnchecked(e){super.set=e}}var te=Object.defineProperty,se=(i,e,t)=>e in i?te(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,b=(i,e,t)=>(se(i,typeof e!="symbol"?e+"":e,t),t);let V={},ie=(i,e,t)=>(V[i]=new I(i,e,t),V[i]);class I{constructor(e,t,s){b(this,"pathID"),b(this,"settings",{}),b(this,"subGroups",{}),b(this,"name"),b(this,"description"),this.pathID=e,this.name=t,this.description=s}makeSubGroup(e,t,s){if(e in this.subGroups){console.warn("Sub group already registered "+e);return}else return this.subGroups[e]=new I(this.pathID+"/"+e,t,s)}makeBooleanSetting(e,t,s,n){if(e in this.settings)throw new Error("Settings already registered "+e);let a=localStorage[this.pathID+"/"+e];if(a)var r=new k(JSON.parse(a));else if(typeof n=="boolean")var r=new k(n);else{var r=new k(!1);n.then(m=>{r.set=m})}return r.info={name:t,description:s},r.addListener(_=>{localStorage[this.pathID+"/"+e]=JSON.stringify(_)},!a),this.settings[e]=r}makeNumberSetting(e,t,s,n,a,r,_,m){if(e in this.settings)throw new Error("Settings already registered "+e);let g=localStorage[this.pathID+"/"+e];if(g)var o=new x(JSON.parse(g),a,r,_,m);else if(typeof n=="number")var o=new x(n,a,r,_,m);else{var o=new x(NaN,a,r,_,m);n.then(C=>{o.set=C})}return o.info={name:t,description:s},o.addListener(E=>{localStorage[this.pathID+"/"+e]=JSON.stringify(E)},!g),this.settings[e]=o}makeStringSetting(e,t,s,n,a,r,_,m){if(e in this.settings)throw new Error("Settings already registered "+e);let g=localStorage[this.pathID+"/"+e];if(g)var o=new $(JSON.parse(g),a,r,_,m);else if(typeof n=="string")var o=new $(n,a,r,_,m);else{var o=new $("",a,r,_,m);n.then(C=>{o.set=C})}return o.info={name:t,description:s},o.addListener(E=>{localStorage[this.pathID+"/"+e]=JSON.stringify(E)},!g),this.settings[e]=o}}let S=(i,e)=>{let t;return function(){return t||(t=new DOMParser().parseFromString(e,"image/svg+xml").firstChild,t.setAttribute("icon",i)),t.cloneNode(!0)}},ne=S("material_action_touch_app_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M18.19,12.44l-3.24-1.62c1.29-1,2.12-2.56,2.12-4.32c0-3.03-2.47-5.5-5.5-5.5s-5.5,2.47-5.5,5.5c0,2.13,1.22,3.98,3,4.89 v3.26c-2.15-0.46-2.02-0.44-2.26-0.44c-0.53,0-1.03,0.21-1.41,0.59L4,16.22l5.09,5.09C9.52,21.75,10.12,22,10.74,22h6.3 c0.98,0,1.81-0.7,1.97-1.67l0.8-4.71C20.03,14.32,19.38,13.04,18.19,12.44z M17.84,15.29L17.04,20h-6.3 c-0.09,0-0.17-0.04-0.24-0.1l-3.68-3.68l4.25,0.89V6.5c0-0.28,0.22-0.5,0.5-0.5c0.28,0,0.5,0.22,0.5,0.5v6h1.76l3.46,1.73 C17.69,14.43,17.91,14.86,17.84,15.29z M8.07,6.5c0-1.93,1.57-3.5,3.5-3.5s3.5,1.57,3.5,3.5c0,0.95-0.38,1.81-1,2.44V6.5 c0-1.38-1.12-2.5-2.5-2.5c-1.38,0-2.5,1.12-2.5,2.5v2.44C8.45,8.31,8.07,7.45,8.07,6.5z"/></g></g></svg>'),ae=S("material_device_dark_mode_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg>'),re=S("material_device_light_mode_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg>'),he=S("material_hardware_mouse_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z"/></svg>'),oe=S("material_image_edit_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"/></svg>');var le=Object.defineProperty,ce=(i,e,t)=>e in i?le(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,h=(i,e,t)=>(ce(i,typeof e!="symbol"?e+"":e,t),t);const ue="@chocolatelibui/theme";var f=(i=>(i.Light="light",i.Dark="dark",i))(f||{});let L=[],M={},d=ie(ue,"Theme/UI","Settings for UI elements and and color themes"),_e={thin:{name:"Thin",description:"Thin modern scrollbar"},medium:{name:"Medium",description:"Normal scrollbar"},wide:{name:"Wide",description:"Large touch friendly scrollbar"}},me={all:{name:"All",description:"All animations"},most:{name:"Most",description:"All but the heaviest animations"},some:{name:"Some",description:"Only the lightest animations"},none:{name:"None",description:"No animations"}},de={off:{name:"Off",description:"Mouse input"},os:{name:"OS Linked",description:"Pen input"}},pe={[f.Light]:{name:"Light",description:"Don't set touch mode automatically",icon:re()},[f.Dark]:{name:"Dark",description:"Change touch mode on first ui interaction",icon:ae()}},ge={mouse:{name:"Mouse",description:"Mouse input",icon:he()},pen:{name:"Pen",description:"Pen input",icon:oe()},touch:{name:"Touch",description:"Touch input",icon:ne()}},fe={off:{name:"Off",description:"Don't set touch mode automatically"},first:{name:"First Interaction",description:"Change touch mode on first ui interaction"},every:{name:"Every Interaction",description:"Change touch mode on every ui interaction"}};class ve{constructor(e,t=""){h(this,"_handler"),h(this,"_listener"),h(this,"scrollbar"),h(this,"animations"),h(this,"theme"),h(this,"autoThemeMode"),h(this,"scale"),h(this,"_scale"),h(this,"scaleMouse"),h(this,"scalePen"),h(this,"scaleTouch"),h(this,"inputMode"),h(this,"autoInputMode"),h(this,"_autoInputListenerEvery",s=>{switch(s.pointerType){case"mouse":this.inputMode.set="mouse";break;case"pen":this.inputMode.set="pen";break;default:case"touch":this.inputMode.set="touch";break}}),h(this,"textScale"),h(this,"textScaleMouse"),h(this,"textScalePen"),h(this,"textScaleTouch"),t&&(t+="-"),this.scrollbar=d.makeStringSetting(t+"scrollbar","Scrollbar","Size of scrollbar","thin",_e),this.scrollbar.addListener(async s=>{this.applyScrollbar(s)}),this.animations=d.makeStringSetting(t+"animations","Animations","Amount of animations in the ui","all",me),this.animations.addListener(async s=>{this.applyAnimation(s)}),this.theme=d.makeStringSetting(t+"theme","Theme","Color theme of UI",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?f.Dark:f.Light,pe),this.theme.addListener(s=>{this.applyTheme(s)}),this.autoThemeMode=d.makeStringSetting(t+"autoTheme","Automatic Theme Change","Toggle for automatically changing theme","os",de),this.inputMode=d.makeStringSetting(t+"inputMode","Input Mode","Toggle between input modes","mouse",ge),this.inputMode.addListener(async s=>{switch(s){case"mouse":this.scale.set=await this.scaleMouse.get;break;case"pen":this.scale.set=await this.scalePen.get;break;case"touch":this.scale.set=await this.scaleTouch.get;break}this.applyInput(s)}),this.autoInputMode=d.makeStringSetting(t+"autoTouch","Automatic Touch Mode","Mode for automatically changing touch mode","every",fe),this.autoInputMode.addListener(s=>{this.applyAutoInput(s)}),this.scaleMouse=d.makeNumberSetting(t+"scaleMouse","UI Scale Mouse","The scale of the UI for mouse usage",1,.5,4,.1),this.scaleMouse.addListener(s=>{this.inputMode.get==="mouse"&&(this.scale.set=s)}),this.scalePen=d.makeNumberSetting(t+"scalePen","UI Scale Pen","The scale of the UI for pen usage",1.2,.5,4,.1),this.scalePen.addListener(s=>{this.inputMode.get==="pen"&&(this.scale.set=s)}),this.scaleTouch=d.makeNumberSetting(t+"scaleTouch","UI Scale Touch","The scale of the UI for touch usage",1.6,.5,4,.1),this.scaleTouch.addListener(s=>{this.inputMode.get==="touch"&&(this.scale.set=s)}),this.scale=new x(1,.5,4,.1),this.scale.addListener(s=>{switch(this._scale=s*16,this.applyScale(s),this.inputMode.get){case"mouse":this.scaleMouse.set=s;break;case"pen":this.scalePen.set=s;break;case"touch":this.scaleTouch.set=s;break}}),this._scale=this.scale.get*16,this.textScaleMouse=d.makeNumberSetting(t+"textScaleMouse","UI Text Scale Mouse Mode","The scale of the UI text for mouse usage",1,.5,2,.1),this.textScaleMouse.addListener(s=>{this.inputMode.get==="mouse"&&(this.textScale.set=s)}),this.textScalePen=d.makeNumberSetting(t+"textScalePen","UI Text Scale Pen Mode","The scale of the UI text for pen usage",1.2,.5,2,.1),this.textScalePen.addListener(s=>{this.inputMode.get==="pen"&&(this.textScale.set=s)}),this.textScaleTouch=d.makeNumberSetting(t+"textScaleTouch","UI Text Scale Touch Mode","The scale of the UI text for touch usage",1.6,.5,2,.1),this.textScaleTouch.addListener(s=>{this.inputMode.get==="touch"&&(this.textScale.set=s)}),this.textScale=new x(1,.5,2,.1),this.textScale.addListener(s=>{switch(this.applyTextScale(s),this.inputMode.get){case"mouse":this.textScaleMouse.set=s;break;case"pen":this.textScalePen.set=s;break;case"touch":this.textScaleTouch.set=s;break}}),L.push(this),this._handler=e,this._listener=this._handler.events.on("added",s=>{this.applyAllToDoc(s.data)}),e.forDocuments(s=>{this.applyAllToDoc(s)})}destructor(){this._handler.events.off("added",this._listener);let e=L.indexOf(this);if(e==-1)return console.warn("Theme engine already destructed");L.splice(e,1)}async applyAllToDoc(e){switch(this.applyScrollbarToDoc(e,await this.scrollbar.get),this.applyAnimationToDoc(e,await this.animations.get),this.applyThemeToDoc(e,await this.theme.get),this.applyAutoInputToDoc(e,await this.autoInputMode.get),this.applyInputToDoc(e,await this.inputMode.get),await this.inputMode.get){case"mouse":this.scale.set=await this.scaleMouse.get;break;case"pen":this.scale.set=await this.scalePen.get;break;case"touch":this.scale.set=await this.scaleTouch.get;break}this.applyScaleToDoc(e,await this.scale.get),this.applyTextScaleToDoc(e,await this.textScale.get)}applyScrollbar(e){this._handler.forDocuments(t=>{this.applyScrollbarToDoc(t,e)})}applyScrollbarToDoc(e,t){e.documentElement.style.setProperty("--scrollbar",{thin:"0.4rem",medium:"1rem",wide:"1.875rem"}[t])}applyAnimation(e){this._handler.forDocuments(t=>{this.applyAnimationToDoc(t,e)})}applyAnimationToDoc(e,t){switch(e.documentElement.classList.remove("anim-all","anim-most","anim-some"),t){case"all":e.documentElement.classList.add("anim-all");case"most":e.documentElement.classList.add("anim-most");case"some":e.documentElement.classList.add("anim-some");break}}applyTheme(e){this._handler.forDocuments(t=>{this.applyThemeToDoc(t,e)})}applyThemeToDoc(e,t){for(const s in M)M[s].applyThemes(e.documentElement.style,t)}applyScale(e){this._handler.forDocuments(t=>{this.applyScaleToDoc(t,e)})}applyScaleToDoc(e,t){e.documentElement.style.fontSize=t*16+"px"}applyTextScale(e){this._handler.forDocuments(t=>{this.applyTextScaleToDoc(t,e)})}applyTextScaleToDoc(e,t){e.documentElement.style.setProperty("--textScale",String(t))}applyInput(e){this._handler.forDocuments(t=>{this.applyInputToDoc(t,e)})}applyInputToDoc(e,t){let s=e.documentElement.style;switch(s.setProperty("--mouse","0"),s.setProperty("--pen","0"),s.setProperty("--touch","0"),e.documentElement.classList.remove("mouse","pen","touch"),t){case"mouse":s.setProperty("--mouse","1"),e.documentElement.classList.add("mouse");break;case"pen":s.setProperty("--pen","1"),e.documentElement.classList.add("pen");break;case"touch":s.setProperty("--touch","1"),e.documentElement.classList.add("touch");break}}applyAutoInput(e){this._handler.forDocuments(t=>{this.applyAutoInputToDoc(t,e)})}applyAutoInputToDoc(e,t){switch(e.documentElement.removeEventListener("pointerdown",this._autoInputListenerEvery,{capture:!0}),t){case"first":e.documentElement.addEventListener("pointerdown",this._autoInputListenerEvery,{capture:!0,once:!0});break;case"every":e.documentElement.addEventListener("pointerdown",this._autoInputListenerEvery,{capture:!0});break}}async applySingleProperty(e,t){let s=await this.theme.get;this._handler.forDocuments(n=>{n.documentElement.style.setProperty(e,t[s])})}remToPx(e){return e*this._scale}pxToRem(e){return e/this._scale}}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{for(let e=0;e<L.length;e++)L[e].autoThemeMode.get==="os"&&(L[e].theme.set=i.matches?f.Dark:f.Light)});let G=(i,e,t)=>(M[i]=new O(i,e,t),M[i]);class O{constructor(e,t,s){h(this,"pathID"),h(this,"variables",{}),h(this,"subGroups",{}),h(this,"name"),h(this,"description"),this.pathID=e,this.name=t,this.description=s}makeSubGroup(e,t,s){if(e in this.subGroups)throw new Error("Sub group already registered "+e);return this.subGroups[e]=new O(this.pathID+"/"+e,t,s)}makeVariable(e,t,s,n,a,r,_){if(e in this.variables)throw new Error("Settings already registered "+e);let m="--"+this.pathID+"/"+e,g=this.variables[m]={name:t,desc:s,vars:{[f.Light]:n,[f.Dark]:a}};for(let o=0;o<L.length;o++)L[o].applySingleProperty(m,g.vars)}applyThemes(e,t){for(const s in this.variables)e.setProperty(s,this.variables[s].vars[t]);for(const s in this.subGroups)this.subGroups[s].applyThemes(e,t)}}let F={50:"#FAFAFA",100:"#F5F5F5",200:"#EEEEEE",300:"#E0E0E0",400:"#BDBDBD",500:"#9E9E9E",600:"#757575",700:"#616161",800:"#424242",900:"#212121"};class Le{constructor(e){l(this,"___valueListeners",[]);l(this,"___value");l(this,"info");this.___value=e}addListener(e,t){if(this.___valueListeners.push(e),t){let s=this.get;s instanceof Promise?s.then(e):e(s)}return e}removeListener(e){let t=this.___valueListeners.indexOf(e);return t!=-1&&this.___valueListeners.splice(t,1),e}get get(){return this.___value}set set(e){this.___value!==e&&(this.___value=e,this.___update())}___update(){if(this.___valueListeners)for(let e=0,t=this.___valueListeners.length;e<t;e++)try{this.___valueListeners[e](this.___value)}catch(s){console.warn("Failed while calling value listeners ",s)}}compare(e){let t=this.get;return t instanceof Promise?t.then(s=>e!==s):e!==t}get inUse(){return this.___valueListeners.length!==0}hasListener(e){return this.___valueListeners.indexOf(e)!==-1}toJSON(){return this.___value}}class we extends Le{constructor(t,s){super(t);l(this,"___limiters");l(this,"___limitersListeners",[]);this.___limiters=s}addLimiterListener(t,s){return this.___limitersListeners.push(t),s&&t(this),t}removeLimiterListener(t){let s=this.___limitersListeners.indexOf(t);return s!=-1&&this.___limitersListeners.splice(s,1),t}___updateLimiter(){if(this.___limitersListeners)for(let t=0,s=this.___limitersListeners.length;t<s;t++)try{this.___limitersListeners[t](this)}catch(n){console.warn("Failed while calling value listeners ",n)}}get limiters(){return this.___limiters}set limiters(t){t?this.___limiters=t:delete this.___limiters,this.___updateLimiter()}checkLimit(t){if(this.___limiters){for(let s=0;s<this.___limiters.length;s++)if(this.___limiters[s].func(t))return!1}return!0}checkLimitReason(t){if(this.___limiters)for(let s=0;s<this.___limiters.length;s++){let n=this.___limiters[s];if(n.func(t))if(n.correction)switch(typeof n.reason){case"string":return{allowed:!1,reason:n.reason,correction:n.correction(t)};case"function":return{allowed:!1,reason:n.reason(t),correction:n.correction(t)}}else switch(typeof n.reason){case"string":return{allowed:!1,reason:n.reason};case"function":return{allowed:!1,reason:n.reason(t)}}}return{allowed:!0,reason:""}}set set(t){t===this.___value||!this.checkLimit(t)||(this.___value=t,this.___update())}}class ye extends we{constructor(t,s,n,a,r){super(t,r);l(this,"_maxLength");l(this,"_maxByteLength");l(this,"___enums");this._maxLength=n,this._maxByteLength=a,this.___enums=s}get enums(){return this.___enums}set enums(t){if(t){if(this.___enums=t,!this.checkEnum(this.___value))for(const s in this.___enums){this.___value=s,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(t){return!this.___enums||t in this.___enums}get maxLength(){return this._maxLength}set maxLength(t){this._maxLength=t,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(t){if(this._maxByteLength=t,this._maxByteLength){let s=T(this.___value,this._maxByteLength);this.___value!==s&&(this.___value=s,this.___update())}this.___updateLimiter()}set set(t){this._maxLength&&t.length>this._maxLength&&(t=t.slice(0,this._maxLength)),this._maxByteLength&&(t=T(t,this._maxByteLength)),t!==this.___value&&this.checkLimit(t)&&this.checkEnum(t)&&(this.___value=t,this.___update())}}var be=Object.defineProperty,xe=(i,e,t)=>e in i?be(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,v=(i,e,t)=>(xe(i,typeof e!="symbol"?e+"":e,t),t),w=(i=>(i.write="w",i.read="r",i.none="n",i))(w||{});const Se={w:{name:"Write",description:"Write access to element"},r:{name:"Read",description:"Read access to element"},n:{name:"None",description:"No access to element"}};class De extends ye{constructor(e){super(e,Se)}}class ke extends HTMLElement{constructor(...e){super(),v(this,"$connectedObserver"),v(this,"isVisible",!1),v(this,"events",new U),v(this,"$values"),v(this,"$valueFuncs"),v(this,"$valueConnector"),v(this,"$access",w.write),v(this,"$accessListener"),this.events.target=this}static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui-core"}connectedCallback(){this.$connectedObserver?this.$connectedObserver.observe(this):(this.events.emit("connect",0),this.isVisible=!0)}disconnectedCallback(){this.$connectedObserver?(this.$connectedObserver.unobserve(this),this.isVisible&&(this.events.emit("connect",1),this.isVisible=!1)):(this.events.emit("connect",1),this.isVisible=!1)}adoptedCallback(){this.events.emit("connect",2)}options(e){return this.access=e.access,this}attachToObserver(e){e?(this.$connectedObserver=e,this.isConnected&&e.observe(this)):this.$connectedObserver&&(this.isConnected&&this.$connectedObserver.unobserve(this),this.isVisible||(this.events.emit("connect",0),this.isVisible=!0),delete this.$connectedObserver)}attachValue(e,t){if(this.$valueFuncs){if(this.$valueFuncs.includes(t))throw"Function is already attached to this element"}else this.$values=[],this.$valueFuncs=[];return this.$valueConnector?this.isVisible&&e.addListener(t):this.$valueConnector=this.events.on("connect",s=>{switch(s.data){case 0:for(let n=0;n<this.$values.length;n++)this.$values[n].addListener(this.$valueFuncs[n],!0);break;case 1:for(let n=0;n<this.$values.length;n++)this.$values[n].removeListener(this.$valueFuncs[n]);break;case 2:for(let n=0;n<this.$values.length;n++)this.$values[n].removeListener(this.$valueFuncs[n]),this.$values[n].addListener(this.$valueFuncs[n],!0)}}),this.$valueFuncs.push(t),this.$values.push(e),t}dettachValue(e){if(this.$valueFuncs){let t=this.$valueFuncs.indexOf(e);t>-1&&(this.isVisible&&this.$values[t].removeListener(e),this.$values.splice(t,1),this.$valueFuncs.splice(t,1),this.$valueFuncs.length===0&&this.events.off("connect",this.$valueConnector))}}get access(){return this.$access}set access(e){this.$accessListener&&(this.dettachValue(this.$accessListener),delete this.$accessListener),typeof e=="object"&&e instanceof De?this.$accessListener=this.attachValue(e,t=>{this.$accessChange(t),this.$access=t}):e?(this.$accessChange(e),this.$access=e):(this.$accessChange(w.write),this.$access=w.write)}$accessChange(e){switch(e){case w.write:this.inert=!1;break;case w.read:this.inert=!0;break;case w.none:this.setAttribute("inert","none");break}}}const Te=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var Me=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;let Fe=i=>i?/[A-Z]/.test(i)?"Custom element names must not contain uppercase ASCII characters.":i.includes("-")?/^\d/i.test(i)?"Custom element names must not start with a digit.":/^-/i.test(i)?"Custom element names must not start with a hyphen.":Me.test(i)?Te.has(i)?`The supplied element name is reserved and can't be used.
See: https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name`:"Unknown fault":"Invalid element name.":"Custom element names must contain a hyphen. Example: unicorn-cake":"Missing element name.",Ee=i=>{let e=i.elementNameSpace(),t=i.elementName,s="",n=i;for(;n!==HTMLElement&&e===n.elementNameSpace();){let a=n.elementName();if(n=Object.getPrototypeOf(n),t===n.elementName)throw new Error("Element uses same name as ancestor, abstract classes should return '@abstract@'");if(!a.length)throw new Error("Element doesn't define element name");a!=="@abstract@"&&(s="-"+a+s)}s=e+s;try{customElements.define(s,i)}catch(a){throw a.message.includes("has already been used with this registry")?a:new Error(Fe(s)+" "+s)}};const Ce="@chocolatelibui/spinners";let $e="http://www.w3.org/2000/svg",p=(i,e,t)=>{let s=document.createElementNS($e,"circle");return s.setAttribute("cx",String(i)),s.setAttribute("cy",String(e)),s.setAttribute("r",String(t)),s},Ie=G(Ce,"Spinner","Spinner used as a placeholder for data with and unknown arrival time");Ie.makeVariable("color","Dot color","Color of dots in spinner",F[700],F[300],"Color",void 0);let c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox","0 0 64 64");c.appendChild(p(32,6,0));c.appendChild(p(45,9.483,0));c.appendChild(p(54.516,19,0));c.appendChild(p(58,32,0));c.appendChild(p(54.516,45,0));c.appendChild(p(45,54.516,0));c.appendChild(p(32,58,0));c.appendChild(p(19,54.516,0));c.appendChild(p(9.483,45,0));c.appendChild(p(6,32,0));c.appendChild(p(9.483,19,0));c.appendChild(p(19,9.483,0));class y extends ke{static elementName(){return"dots"}static elementNameSpace(){return"chocolatelibui-spinner"}constructor(){super(),this.appendChild(c.cloneNode(!0))}}Ee(y);let Oe=new Q(document),J=new ve(Oe),Ne=G("YO","Spinner","Spinner used as a placeholder for data with and unknown arrival time");Ne.makeVariable("color","Dot color","Color of dots in spinner",F[50],F[900],"Color",void 0);let j=document.body.appendChild(document.createElement("button"));j.innerHTML="Light Mode";j.onclick=()=>{J.theme.set="light"};let R=document.body.appendChild(document.createElement("button"));R.innerHTML="Dark Mode";R.onclick=()=>{J.theme.set="dark"};let N=document.createElement("div");document.body.appendChild(N);N.className="tiny";N.appendChild(new y);let B=document.createElement("div");document.body.appendChild(B);B.className="teeny";B.appendChild(new y);let P=document.createElement("div");document.body.appendChild(P);P.className="little";P.appendChild(new y);let A=document.createElement("div");document.body.appendChild(A);A.className="bittle";A.appendChild(new y);let z=document.createElement("div");document.body.appendChild(z);z.className="big";z.appendChild(new y);
